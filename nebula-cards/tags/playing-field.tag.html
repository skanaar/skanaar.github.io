<playing-field>
  <draggable each={e in cards} model={e} app={app}>
    <item-card card={e}></item-card>
  </draggable>
  <draggable each={e in tokens} model={e} app={app}>
    <token token={e.type}></token>
  </draggable>
  
  <style>
  </style>

  <script>
    var self = this
    self.app = {
      bringToTop: function (model) {
      	var a = Math.max.apply(null, self.cards.map(e => e.z))
      	var b = Math.max.apply(null, self.tokens.map(e => e.z))
        model.z = 1 + Math.max(a,b)
      }
    }

    function BoardEntity(type) {
      return {
        x: 800*Math.random(),
        y: 400*Math.random(),
        z: 0,
        open: false,
        type: type
      }
    }

    self.tokens = [
    	BoardEntity({ type: 'token', kind: 'hull' }),
    	BoardEntity({ type: 'token', kind: 'hull' }),
    	BoardEntity({ type: 'token', kind: 'hull' }),
    	BoardEntity({ type: 'token', kind: 'shield' }),
    	BoardEntity({ type: 'token', kind: 'shield' }),
    	BoardEntity({ type: 'token', kind: 'shield' })
    ]

    self.cards = [
      BoardEntity({ tyep: 'item', name: 'Kinetic gun', credits: 7 }),
      BoardEntity({ tyep: 'item', name: 'Abatron', credits: 3 }),
      BoardEntity({ tyep: 'item', name: 'Platinum', credits: 4 }),
      BoardEntity({ tyep: 'item', name: 'Photon ray', credits: 2 }),
    ]
  </script>
</playing-field>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Cluster Platform</title>
	
	<link href='//fonts.googleapis.com/css?family=Dosis:400' rel='stylesheet' type='text/css'>
	<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

	<link rel="stylesheet" href="css/boilerplate.css">
	<link rel="stylesheet" href="css/cluster.css">
	<link rel="stylesheet" href="css/normalize.css">

	<link rel="shortcut icon" href="img/favicon.png">
	<link rel="apple-touch-icon" href="img/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="img/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="img/apple-touch-icon-114x114.png">
	<style>

		.jumbotron {
			background: #0d8;
			font-size: 300%;
			font-family: 'Dosis', sans-serif;
			background: url(img/algae.jpg) center center;
			background-size: cover;
			color: #eee;
			padding: 20px 0;
			text-align: center;
		}
		.updates {
			background: #eee;
			font-family: 'Dosis', sans-serif;
		}
		.updates .blocks{
			text-align: center;
		}
		.updates .block {
			display: inline-block;
			margin: 0 10px;
			width: 220px;
			text-align: left;
		}
		.updates .block .fa-stack {
			color: #4C9730;
		}
		.updates .block b {
			display: inline-block;
			vertical-align: middle;
			width: 30px;
			font-size: 200%;
			text-align: right
		}
		.updates .block .specifier {
			display: inline-block;
			width: 50px;
			vertical-align: middle;
			margin-left: 10px;
		}
		.profile-summary {
			color: #eee;
			font-family: 'Dosis', sans-serif;
			background: #1C8394;
			padding: 0 20px;
		}
		.profile-summary h2 {
			color: white;
			margin: 0 0 10px 0;
		}
		.profile-summary img {
			border-radius: 146px;
			float: left;
		}
		.profile-summary .properties {
			font-size: 110%;
			padding-left: 20px;
			float: left;
		}
		.profile-summary .properties b{
			font-weight: normal;
			display: block;
			font-size: 80%;
			color: lightgreen;
		}

		.overlay_sidebar {
			display: none;
			position: absolute; 
			top: 0; 
			right: 0; 
			width: 200px; 
			height: 100%; 
			background: rgba(0, 0, 0, 0.5); 
			padding: 0px;
			color: #eee;
			font-family: 'Dosis', sans-serif;
		}
		.overlay_sidebar>div {
			margin: 10px
		}
		.overlay_sidebar h2 {
			color: #8f8;
		}

	</style>
</head>
<body>
	<div class="page">

		<div class="full-row page-stripe">
			<div class="pull-right">
				<a class="tab_link tab_link_dashboard" href="#dashboard">
					<i class="fa fa-home"></i> <span class="hidden-sm">Dashboard</span>
				</a>
				<a class="tab_link tab_link_cluster" href="#cluster">
					<i class="fa fa-bullseye"></i> <span class="hidden-sm">Cluster explorer</span>
				</a>
				<a>
					<i class="fa fa-user"></i> <span class="hidden-sm">Profile</span>
				</a>
				<a href="javascript:void(0)"><i class="fa fa-power-off"></i></a>
			</div>
			<div class="title">
				Cluster Platform for Transformative Solutions
			</div>
		</div>

		<div class="tab_page tab_page_cluster">
			<div class="full-row page-stripe toolbar">
				<div class="pull-right">
					<a id="download-image-link" download="cluster-snapshot.png">
						<i class="fa fa-camera"></i></a>
					<a onclick="engine.zoom(-1)" href="javascript:void(0)">
						<i class="fa fa-plus"></i></a>
					<a onclick="engine.zoom(1)" href="javascript:void(0)">
						<i class="fa fa-minus"></i></a>
				</div>
				<div>
					<label>Filter</label>
					<a class="filter-option filter-r" onclick="engine.filter('r')" href="javascript:void(0)">Mobility</a>
					<a class="filter-option filter-g" onclick="engine.filter('g')" href="javascript:void(0)">Nutrition</a>
					<a class="filter-option filter-b" onclick="engine.filter('b')" href="javascript:void(0)">Building</a>
				</div>
			</div>
			<div style="position: relative">
				<canvas id="canvas" width="800" height="800"></canvas>
				<div class="overlay_sidebar" id="node_details_sidebar">
					<div>
						<div>
							<a class="pull-right"
							   onclick="engine.centerSelected()" 
							   href="javascript:void(0)">
								<i class="fa fa-crosshairs fa-2x"></i>
							</a>
							<h2><span class="bind-name"></span> </h2>
						</div>
						<div class="bind-description"></div>

						<hr>

						<div class="page-stripe toolset">
							<label>Paint</label>
							<a onclick="engine.paint('r')" href="javascript:void(0)">R</a>
							<a onclick="engine.paint('g')" href="javascript:void(0)">G</a>
							<a onclick="engine.paint('b')" href="javascript:void(0)">B</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="tab_page tab_page_dashboard">

			<div class="full-row jumbotron">
				Welcome back, Marie!
			</div>

			<div class="row">
				<div class="column width8 updates">
					<h2>Updates</h2>
					<div class="blocks">
						<div class="block">
							<span class="fa-stack fa-2x">
						  		<i class="fa fa-circle fa-stack-2x"></i>
						  		<i class="fa fa-thumbs-up fa-stack-1x fa-inverse"></i>
							</span>
							<b>14</b><div class="specifier">likes</div>
						</div>
						<div class="block">
							<span class="fa-stack fa-2x">
						  		<i class="fa fa-circle fa-stack-2x"></i>
						  		<i class="fa fa-bolt fa-stack-1x fa-inverse"></i>
							</span>
							<b>6</b><div class="specifier">opportunities</div>
						</div>
						<div class="block">
							<span class="fa-stack fa-2x">
						  		<i class="fa fa-circle fa-stack-2x"></i>
						  		<i class="fa fa-rss fa-stack-1x fa-inverse"></i>
							</span>
							<b>32</b><div class="specifier">news flashes</div>
						</div>
						<div class="block">
							<span class="fa-stack fa-2x">
						  		<i class="fa fa-circle fa-stack-2x"></i>
						  		<i class="fa fa-lightbulb-o fa-stack-1x fa-inverse"></i>
							</span>
							<b>7</b><div class="specifier">ideas for you</div>
						</div>
						<div class="block">
							<span class="fa-stack fa-2x">
						  		<i class="fa fa-circle fa-stack-2x"></i>
						  		<i class="fa fa-link fa-stack-1x fa-inverse"></i>
							</span>
							<b>3</b><div class="specifier">possible connections</div>
						</div>
						<div class="block">
							<span class="fa-stack fa-2x">
						  		<i class="fa fa-circle fa-stack-2x"></i>
						  		<i class="fa fa-link fa-stack-1x fa-inverse"></i>
							</span>
							<b>3</b><div class="specifier">possible connections</div>
						</div>
					</div>
				</div>
				<div class="column width4 profile-summary">
					<h2>Marie Fredricks</h2>
					<img src="img/profiles/marie.jpg" width=100 height=100>
					<div class="properties">
						<div><b>Profile</b> Entrepreneur</div>
						<div><b>Segment</b> Nutrition</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="column width12" style="background: #eee">
					<h2>Heading 2</h2>
				</div>
			</div>

		</div>

		<div class="full-row footer page-stripe">
			<div class="title">
				21st Centruy Frontiers 2014
			</div>
		</div>
	</div>

	<script src="//code.jquery.com/jquery-2.1.0.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.10/angular.min.js"></script>
	<script src="webapp.js"></script>
	<script src="canvas.js"></script>
	<script src="nodes.js"></script>
	<script src="engine.js"></script>
	<script>

	(function (){
		var link = document.getElementById('download-image-link')
		link.addEventListener('click', downloadImage, false);
		function downloadImage(){
			var url = document.getElementById('canvas').toDataURL('image/png')
			var downloadUrl = url.replace(/^data:image\/[^;]/, 'data:application/octet-stream')
		    link.href = downloadUrl;
		}
	}())

	function selectEntity(e){
		$('#node_details_sidebar').show()
		bindData('node_details_sidebar', e)
	}
	function deselectEntity(e){
		$('#node_details_sidebar').hide()
	}

	var nodes = Nodes(90)
	var engine = Engine('canvas', nodes, {
		fps: 40,
		selectEntity: selectEntity,
		deselectEntity: deselectEntity
	})

	window.addEventListener('resize', _.throttle(engine.fillScreen, 750, {leading: true}))
	document.getElementById('canvas').addEventListener('wheel', function (e){ engine.zoom(e.deltaY) })

	fragmentRouting('dashboard', { cluster: engine.fillScreen })

	</script>
</body>
</html>
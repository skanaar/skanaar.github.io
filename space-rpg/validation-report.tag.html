<validation-report>
  <div class="validation-report" if={warnings.length}>
    <div each={e in warnings}>Error: {e.type} <b onclick={select}>{e.name}</b> {e.msg} <b>{e.arg}</b></div>
    <button onclick={validateWorld}>Update</button>
  </div>

  <script>
    var self = this
    var app = self.opts.app || window.app

    self.warnings = []

    self.validateWorld = function () {
      var world = app.getWorld()
      self.warnings = validator.world(world)
      self.update()
    }

    self.select = function (e) {
      app.events.trigger('highlight-entity', e.item.e)
    }

    self.on('mount', function () {
      self.validateWorld()
      app.events.on('request-validate', self.validateWorld)
    })

    self.on('unmount', function () {
      app.events.off('request-validate', self.validateWorld)
    })

  </script>
  <style>
    .validation-report {
      position: fixed;
      bottom: 0;
      left: 25%;
      right: 25%;
      background: #f94c30;
      line-height: 18px;
      color: #fff;
      border-radius: 2px 2px 0 0;
      max-height: 80px;
      padding: 6px 10px;
      overflow: auto;
      z-index: 10;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    .validation-report button {
      position: fixed;
      bottom: 5px;
      right: 25.5%;
    }
    .validation-report b {
      padding: 1px 3px;
      background: rgba(0,0,0,0.3);
      border-radius: 3px;
      cursor: pointer;
    }
  </style>
</validation-report>